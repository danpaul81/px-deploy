description: Install and run Portworx on each cluster
scripts: ["install-px"]
testing:
  maxparallel: 10
  #these will be run on all cloud/platforms
  globaltestparameters:
  - parameter: "px_version"
    #if true this will replace values in defaults.yml, if false it will be added
    ignoredefault: false
    values: ["2.13.5","3.1.0","3.0.4"]
  #these will be run on all matching platforms
  globaltestplatform:
    - platform: "k8s"
      testparameters:
      - parameter: "k8s_version"
        ignoredefault: false
        values: ["1.27.4","1.28.4"]
    - platform: "eks"
      testparameters:
      - parameter: "eks_version"
        ignoredefault: false
        values: ["1.2.3","4.5.6"]
  testclouds:
  - cloud: "aws"
    testplatforms:
    - platform: "k8s"
      testparameters:
      - parameter: "px_version"
        ignoredefault: false
        values: ["3.11"]
    - platform: "eks"
    - platform: "ocp4"
      testparameters:
      - parameter: "px_version"
        ignoredefault: true
        values: ["3.10"]
  - cloud: "azure"
    testplatforms:
    - platform: "k8s"
    - platform: "aks"
  - cloud: "vsphere"
    testplatforms:
    - platform: "k8s"
  - cloud: "gcp"
    testplatforms:
    - platform: "k8s"
    - platform: "gke"